(()=>{var m="/",h=20;(function(){let i=new FlexSearch.Document({document:{id:"id",index:["title","tags","content","date"],store:["title","summary","date","permalink"]},tokenize:"forward",cache:100});function f(e){let n=document.querySelector("template").content,t=document.createDocumentFragment(),c=document.querySelector(".search-results");c.textContent="";for(let a in e){let r=e[a],o=n.cloneNode(!0),d=o.querySelector("a"),p=o.querySelector("time"),S=o.querySelector(".content");d.innerHTML=r.title,d.href=r.permalink,p.innerText=r.date,S.innerHTML=r.summary,t.appendChild(o)}c.appendChild(t)}function s(e){let n=e||document.querySelector(".search-text").value.trim(),t=i.search({query:n,enrich:!0,limit:h,suggest:!0}),c={};t.forEach(function(a){a.result.forEach(function(r){c[r.doc.permalink]=r.doc})}),f(c)}function q(e){e.addEventListener("submit",function(n){n.preventDefault(),s()}),e.addEventListener("input",function(){s()}),document.querySelector(".search-loading").classList.add("hidden"),document.querySelector(".search-bar").classList.remove("hidden"),document.querySelector(".search-text").focus()}function y(e){let n=m+"searchindex.json";document.querySelector(".search-loading").classList.remove("hidden"),fetch(n).then(function(t){return t.json()}).then(function(t){t.forEach(function(c){i.add(c)})}).then(e)}let u=document.querySelector(".search-form");u&&(y(function(){let e=new URLSearchParams(window.location.search).get("q");document.querySelector(".search-text").value=e||"",s(e)}),q(u))})();})();
